<form class="{{cssClass}}" autocomplete="off">
    {{#unless data.attributeGenerationType}}<span class="warning">Please Select an attribute generation type on the Attribute page.</span><br/>{{/unless}}
    {{#unless actor.species}}<span class="warning">Please Select a Species</span><br/>{{/unless}}
    {{#unless actor.classes}}<span class="warning">Please Select a Class</span><br/>{{/unless}}
    {{#if data.remainingSkills}}
        <span class="warning">Remaining Trained Skills: {{data.remainingSkills}}</span><br/>{{/if}}
    {{#if data.tooManySkills}}<span class="warning">Too Many Skills Selected: {{data.tooManySkills}}</span><br/>{{/if}}
    {{#each actor.availableItems as |item id|}}<span class="warning">Items from {{id}} remaining: {{item}}</span><br/>{{/each}}
    {{#each actor.inactiveProvidedFeats as |feat id|}}
        <span class="warning">The {{feat.data.finalName}} feat is provided but cannot be added because of missing prerequisites: {{feat.data.prerequisite.text}}</span><br/>
    {{/each}}
    <div>
        {{!-- Sheet Tab Navigation --}}
        <nav class="sheet-tabs tabs" data-group="primary">
            <a class="item" data-tab="summary">Summary</a>
            <a class="item" data-tab="attributes">Attributes</a>
            <a class="item" data-tab="charClass">Class</a>
            <a class="item" data-tab="equipment">Equipment</a>
            <!--        {{#if
                    actor.data.isDroid}}<a class="item" data-tab="droid"><span>Droid Systems</span></a>{{/if}}-->
            <a class="item" data-tab="feats">Feats</a>
            <a class="item" data-tab="talents">Talents</a>
            <a class="item" data-tab="traits">Traits</a>
            {{#unless actor.hideForce}}<a class="item" data-tab="force">The Force</a>{{/unless}}
            <a class="item" data-tab="affiliations">Affiliations</a>
<!--            {{#if actor.prerequisites.isForceTrained}}<a class="item" data-tab="force">The Force</a>{{/if}}-->
            <!--        <a class="item" data-tab="description">Description</a>-->
        </nav>

        {{!-- Sheet Body --}}
        <section class="sheet-body">
            {{!-- Summary Page --}}
            <div class="tab summary flex-col" data-group="primary" data-tab="summary">
                <div>
                    {{> 'systems/swse/templates/actor/parts/actor-summary.hbs'}}
                </div>
                <div class="flex flex-row">
                    <div><!--attributes--></div>
                    <div><!--health--></div>
                    <div class="flex flex-col">
                        <div><!--portrait--></div>
                        <div><!--condition--></div>
                    </div>
                </div>
                <div class="flex flex-row">
                    <div class="flex-grow"><!--defenses--></div>
                    <div class="flex-grow"><!--darkside--></div>
                </div>
                <div class="flex flex-row">
                    <div class="flex-grow">{{> 'systems/swse/templates/actor/parts/actor-weapon-armor-summary.hbs'}}</div>
                    <div class="flex-grow">{{> 'systems/swse/templates/actor/parts/actor-skills.hbs'}}</div>
                </div>

                <div class="resources grid grid-2col"> <!--class="resources grid grid-3col">-->
                    <div class="">
                        <div class="resource flex-group-center">
                            <label for="data.health.value" class="resource-label">Health</label>
                            <div class="resource-content flexrow flex-center flex-between">
                                <table class="fixed">
                                    <thead>
                                    <tr>
                                        <th>Current</th>
                                        <th>Max</th>
                                        <th>Temp.</th>
                                        <th>DR</th>
                                        <th>SR</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td><label>
                                            <input class="plain" type="text" name="data.health.value" value="{{data.health.value}}"
                                                   data-dtype="Number"/>
                                        </label></td>
                                        <td>
                                            <label>{{data.health.max}}</label>
                                        </td>
                                        <td><label>
                                            <input class="plain" type="text" name="data.health.temp" value="{{data.health.temp}}"
                                                   data-dtype="Number"/>
                                        </label></td>
                                        <td><label>
                                            <input class="plain" type="text" name="data.health.dr" value="{{data.health.dr}}"
                                                   data-dtype="Number"/>
                                        </label></td>
                                        <td><label>
                                            <input class="plain" type="text" name="data.health.sr" value="{{data.health.sr}}"
                                                   data-dtype="Number"/>
                                        </label></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="resource flex-group-center">
                            <label class="resource-label">Condition</label>
                            <table>
                                <thead>
                                <tr>
                                    <th>Normal</th>
                                    <th>-1</th>
                                    <th>-2</th>
                                    <th>-5</th>
                                    <th>-10</th>
                                    <th>Helpless</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td><label><input class="condition-radio" type="radio" name="condition" value="0"
                                                      {{#ifEquals actor.data.condition 0}}checked{{/ifEquals}}
                                                      data-dtype="Number"/></label></td>
                                    <td><label><input class="condition-radio" type="radio" name="condition" value="1"
                                                      {{#ifEquals actor.data.condition 1}}checked{{/ifEquals}}
                                                      data-dtype="Number"/></label></td>
                                    <td><label><input class="condition-radio" type="radio" name="condition" value="2"
                                                      {{#ifEquals actor.data.condition 2}}checked{{/ifEquals}}
                                                      data-dtype="Number"/></label></td>
                                    <td><label><input class="condition-radio" type="radio" name="condition" value="3"
                                                      {{#ifEquals actor.data.condition 3}}checked{{/ifEquals}}
                                                      data-dtype="Number"/></label></td>
                                    <td><label><input class="condition-radio" type="radio" name="condition" value="4"
                                                      {{#ifEquals actor.data.condition 4}}checked{{/ifEquals}}
                                                      data-dtype="Number"/></label></td>
                                    <td><label><input class="condition-radio" type="radio" name="condition" value="5"
                                                      {{#ifEquals actor.data.condition 5}}checked{{/ifEquals}}
                                                      data-dtype="Number"/></label></td>
                                </tr>
                                </tbody>
                            </table>
                            <!-- <div class="resource-content flexrow flex-center flex-between">
                            </div> -->
                        </div>
                        <div class="resource flex-group-center">
                            <label for="data.health.value" class="resource-label">Defense</label>
                            <table>
                                <thead>
                                <tr>
                                    <th>Reflex Defence</th>
                                    <th>Fortitude Defence</th>
                                    <th>Will Defence</th>
                                    <th>Damage Threshold</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>{{data.defense.ref}}</td>
                                    <td>{{data.defense.fort}}</td>
                                    <td>{{data.defense.will}}</td>
                                    <td>{{data.defense.dt}}</td>
                                </tr>
                                {{#each data.defense.situationalBonuses as |bonus id|}}
                                    <tr><td colspan="4">{{bonus}}</td></tr>
                                {{/each}}

                                </tbody>
                            </table>
                        </div>
                        <div class="resource flex-group-center">
                            <label for="data.health.value" class="resource-label">Offense</label>
                            <table>
                                <thead>
                                <tr>
                                    <th>Base Attack Bonus</th>
                                    <th>Ranged Attack Bonus</th>
                                    <th>Melee Attack Bonus</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>{{data.offense.bab}}</td>
                                    <td>{{data.offense.rab}}</td>
                                    <td>{{data.offense.mab}}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="resource flex-group-center">
                            <label for="data.health.value" class="resource-label">Traits</label>
                            <table>
                                <thead>

                                </thead>
                                <tbody>
                                {{#each actor.traits as |trait id|}}
                                    {{#unless trait.hide}}
                                        <tr>
                                            <td title="{{#if trait.data.textDescription}}{{trait.data.textDescription}} {{/if}}Source: {{trait.data.sourceString}}">{{trait.data.finalName}}</td>
                                        </tr>
                                    {{/unless}}
                                {{/each}}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>


            {{!-- Attributes Tab --}}
            <div class="tab attributes" data-group="primary" data-tab="attributes">
                <table class="fixed">
                    <thead>
                    <tr>
                        <th>Attribute</th>
                        <th>Score</th>
                        <th>Temporary Bonus</th>
                        <th>Modifier</th>
                    </tr>
                    </thead>
                    <tbody>
                    {{#each data.attributes as |attribute id|}}
                        {{#unless attribute.skip}}
                            <tr class="attribute" data-label="{{attribute.label}}">
                                <th><a class="rollable" title="Roll 1d20 + {{attribute.roll}}"
                                       data-label="{{attribute.label}}" data-roll="1d20 + {{attribute.roll}}"><i
                                        class="fas fa-dice"></i>
                                </a>{{attribute.label}}</th>
                                <td><span class="center" title="classLevelBonus: {{attribute.classLevelBonus}}
speciesBonus: {{attribute.speciesBonus}}
ageBonus: {{attribute.ageBonus}}
equipmentBonus: {{attribute.equipmentBonus}}
buffBonus: {{attribute.buffBonus}}
customBonus: {{attribute.customBonus}}">{{attribute.total}}</span></td>
                                <td><span class="center text-box direct" name="data.attributes.{{id}}.customBonus"
                                          data-dtype="Number">{{attribute.customBonus}}</span></td>
                                <td><span class="center">{{attribute.roll}}</span></td>
                            </tr>
                        {{/unless}}
                    {{/each}}
                    </tbody>
                </table>
                {{#unless data.lockAttributes}}
                    <button id="generationType">Select Attribute Generation Type</button>
                    {{#ifEquals data.attributeGenerationType "Roll"}}
                        <button id="rollAbilities">Roll Abilities</button>
                    {{/ifEquals}}
                    {{#ifEquals data.attributeGenerationType "Standard Array"}}
                        <button id="assignStandardArray">Assign Standard Array</button>
                    {{/ifEquals}}
                    {{#ifEquals data.attributeGenerationType "Point Buy"}}
                        <button id="assignAttributePoints">Assign Attribute Points</button>
                    {{/ifEquals}}
                    {{#ifEquals data.attributeGenerationType "Manual"}}
                        <button id="assignManual">Assign Attributes Manually</button>
                    {{/ifEquals}}
                    {{#each data.levelAttributeBonus as |bonus key|}}
                        {{#if bonus}}
                            <button class="leveledAttributeBonus" data-level="{{key}}">Select Level {{key}} Attribute
                                Bonuses
                            </button>{{/if}}
                    {{/each}}
                {{/unless}}
            </div>


            {{!-- Class Page --}}
            <div class="tab summary" data-group="primary" data-tab="charClass">
                <table class="fixed">
                    <thead>
                    <tr>
                        <th></th>
                        <th>Class</th>
                        <th>Class HP</th>
                        <th>Re-roll HP</th>
                        <th>Attribute Bonus HP</th>
                        <th>Total HP</th>
                        <!--                  <th>First Level Class</th> -->
                        <th>
                            <a data-action="compendium" data-action-target="world.swse-classes"
                               title="{{localize "Open Compendium"}}"><i class="fas fa-folder-plus"></i></a></th>
                    </tr>
                    </thead>
                    <tbody>
                    <!-- <ol class="items-list charclass-list"> -->
                    {{#each actor.classes as |class id|}}
                        <tr class="charclass item" data-item-id="{{class._id}}">
                            <td class="item-image"><img src="{{class.img}}" title="{{class.name}}" width="24"
                                                        height="24" alt="{{class.name}}"/></td>
                            <td><h4 class="item-name">{{class.name}}</h4></td>
                            <td><span class="text-box {{#unless
                                    class.data.attributes.first}}direct short{{/unless}} center"
                                      data-item="{{class._id}}" data-name="data.health.rolledHp"
                                      data-dtype="Number">{{class.data.health.rolledHp}}</span>
                            </td>
                        <td>
                                {{#unless class.data.attributes.first}}
                                    <a class="rollable" title="Re-roll {{class.data.health.levelUp}}"
                                       data-item="{{class._id}}" data-name="data.health.rolledHp"
                                       data-roll="{{class.data.health.levelUp}}"><i class="fas fa-dice"></i>
                                    </a>{{/unless}}</td>
                            <td>{{../data.attributes.con.mod}}</td>
                            <td>{{sum class.data.health.rolledHp ../data.attributes.con.mod}}</td>
                            <td class="item-controls">
                                <a class="item-control item-edit" title="View Class Description"><i class="fas fa-edit"></i></a>
                                <a class="item-control item-duplicate" title="Copy Class"><i class="fas fa-plus"></i></a>
                                {{#if class.isLatest}}
                                    <a class="item-control item-delete" title="Delete Class"><i class="fas fa-trash"></i></a>{{/if}}
                            </td>
                        </tr>
                    {{/each}}
                    <tr><td></td><td></td><td></td><td title="these bonuses come from feats, traits, and equipped items." colspan="2">Other Bonuses: {{data.health.other}}</td><td>{{data.health.max}}</td><td></td></tr>
                    <!-- </ol> -->
                    </tbody>
                </table>
            </div>

            {{!-- Biography Tab --}}
            <div class="tab biography" data-group="primary" data-tab="description">
                {{editor content=data.biography target="data.biography" button=true owner=owner editable=editable}}
            </div>

            {{!-- Owned Equipment Tab --}}
            <div class="tab items" data-group="primary" data-tab="equipment">
                <div>
                    <h2><label class="resource-label">Equipment <a data-action="compendium"
                                                                   data-action-target="world.swse-items"
                                                                   title="{{localize "Open Compendium"}}"><i
                            class="fas fa-folder-plus"></i></a></label></h2>
                </div>
                <div class="grid-2col">
                    <div class="border unequipped item-container">
                        <div>
                            <label class="resource-label">Unequipped</label>
                        </div>
                        <ol class="items-list">
                            {{#each actor.unequipped as |item id|}}
                                <li class="item flexrow draggable" data-item-id="{{item._id}}"
                                    data-item-name="{{item.name}}">
                                    <div class="item-image"><img src="{{item.img}}" title="{{item.name}}" width="24"
                                                                 height="24" alt=""/></div>
                                    <h4 class="item-name">{{item.name}}</h4>
                                    <div class="item-controls">
                                        <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                                        <a class="item-control item-delete" title="Delete Item"><i
                                                class="fas fa-trash"></i></a>
                                    </div>
                                </li>
                            {{/each}}
                        </ol>
                    </div>
                    <div class="border equipped item-container">
                        <div>
                            <label class="resource-label">Equipped</label>
                        </div>
                        <ol class="items-list">
                            {{#each actor.equipped as |item id|}}
                                <li class="item flexrow draggable" data-item-id="{{item._id}}"
                                    data-item-name="{{item.name}}">
                                    <div class="item-image"><img src="{{item.img}}" title="{{item.name}}" width="24"
                                                                 height="24" alt=""/></div>
                                    <h4 class="item-name">{{item.name}}</h4>
                                    <div class="item-controls">
                                        <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                                        <a class="item-control item-delete" title="Delete Item"><i
                                                class="fas fa-trash"></i></a>
                                    </div>
                                </li>
                            {{/each}}
                        </ol>
                    </div>
                </div>

                <div class="border general-equipment">
                    <div>
                        <label class="resource-label">General Equipment</label>
                    </div>
                    <ol class="items-list">
                        {{#each actor.inventory as |item id|}}
                            <li class="item flexrow draggable" data-item-id="{{item._id}}"
                                data-item-name="{{item.name}}">
                                <div class="item-image"><img src="{{item.img}}" title="{{item.name}}" width="24"
                                                             height="24" alt=""/></div>
                                <h4 class="item-name">{{item.name}}</h4>
                                <div class="item-controls">
                                    <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                                    <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                                </div>
                            </li>
                        {{/each}}
                    </ol>
                </div>

            </div>


            <div class="tab summary" data-group="primary" data-tab="droid">

            </div>

            {{!-- Owned Feats Tab --}}
            <div class="tab items" data-group="primary" data-tab="feats">
                <div>
                    <h2><label class="resource-label">Feats <a data-action="compendium"
                                                               data-action-target="world.swse-feats"
                                                               title="{{localize "Open Compendium"}}"><i
                            class="fas fa-folder-plus"></i></a></label></h2>
                </div>
                <ol class="items-list">
                    {{#each actor.feats as |feat id|}}
                        <li class="item feat flexrow" data-item-name="{{feat.data.finalName}}"
                            data-item-id="{{feat._id}}">
                            <!--                <div class="item-image"><img src="{{feat.img}}" title="{{feat.name}}" width="24" height="24"/></div>-->
                            <h4 class="item-name"><b>{{feat.data.finalName}}</b></h4>
                            {{#if feat.data.prerequisite }}
                                <h4 class="item-name"><b>Prerequisites:</b> {{feat.data.prerequisite.text}}</h4>{{/if}}
                            <!-- TODO maybe put the description here-->

                            <div class="item-controls">
                                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                                {{#unless feat.data.isSupplied}}
                                    <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>{{/unless}}
                            </div>
                        </li>
                    {{/each}}
                </ol>
            </div>

            {{!-- Owned Talents Tab --}}
            <div class="tab items" data-group="primary" data-tab="talents">
                <div>
                    <h2><label class="resource-label">Talents <a data-action="compendium"
                                                                 data-action-target="world.swse-talents"
                                                                 title="{{localize "Open Compendium"}}"><i
                            class="fas fa-folder-plus"></i></a></label></h2>
                </div>
                <ol class="items-list">
                    {{#each actor.talents as |talent id|}}
                        <li class="item flexrow" data-item-id="{{talent._id}}">
                            <h4 class="item-name"><b>{{talent.data.finalName}}</b></h4>
                            <h4 class="item-name"><a
                                    href="{{talent.data.talentTreeUrl}}"><b>{{talent.talentTree}}</b></a></h4>
                            <h4 class="item-name">{{#if talent.data.prerequisites}}
                                <b>Prerequisites:</b> {{talent.data.prerequisites}}{{/if}}</h4>
                            <div class="item-controls">
                                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                            </div>
                        </li>
                    {{/each}}
                </ol>
            </div>


            {{!-- Owned Traits Tab --}}
            <div class="tab items" data-group="primary" data-tab="traits">
                <div>
                    <h2><label class="resource-label">Talents <a data-action="compendium"
                                                                 data-action-target="world.swse-talents"
                                                                 title="{{localize "Open Compendium"}}"><i
                            class="fas fa-folder-plus"></i></a></label></h2>
                </div>
                <ol class="items-list">
                    {{#each actor.traits as |trait id|}}
                        <li class="item flexrow" data-item-id="{{trait._id}}">
                            <h4 class="item-name"><b>{{trait.data.finalName}}</b></h4>
                            <h4 class="item-name">Source: {{trait.data.supplier.type}}
                                , {{trait.data.supplier.name}}</h4>
                            <h4 class="item-name">{{#if trait.data.prerequisites}}
                                <b>Prerequisites:</b> {{trait.data.prerequisites}}{{/if}}</h4>
                            <div class="item-controls">
                                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                            </div>
                        </li>
                    {{/each}}
                </ol>
            </div>

            {{!-- Owned Powers Tab --}}
            <div class="tab items" data-group="primary" data-tab="force">
                <div>
                    <h2><label class="resource-label">Force Powers <a data-action="compendium"
                                                                      data-action-target="world.swse-force-powers"
                                                                      title="{{localize "Open Compendium"}}"><i
                            class="fas fa-folder-plus"></i></a></label></h2>
                </div>
                <ol class="items-list">
                    {{#each actor.powers as |power id|}}
                        <li class="item flexrow" data-item-id="{{power._id}}">
                            <h4 class="item-name"><b>{{power.name}}</b></h4>
                            {{#if power.data.prerequisites}}
                                <h4 class="item-name"><b>Prerequisites:</b> {{power.data.prerequisites}}</h4>{{/if}}
                            <div class="item-controls">
                                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                            </div>
                        </li>
                    {{/each}}
                </ol>
                <br/>
                <div>
                    <h2><label class="resource-label">Force Secrets <a data-action="compendium"
                                                                       data-action-target="world.swse-force-secrets"
                                                                       title="{{localize "Open Compendium"}}"><i
                            class="fas fa-folder-plus"></i></a></label></h2>
                </div>
                <ol class="items-list">
                    {{#each actor.secrets as |item id|}}
                        <li class="item flexrow" data-item-id="{{item._id}}">
                            <h4 class="item-name"><b>{{item.name}}</b></h4>
                            <h4 class="item-name"><b>Prerequisites:</b> {{item.prerequisites}}</h4>
                            <div class="item-controls">
                                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                            </div>
                        </li>
                    {{/each}}
                </ol>
                <br/>
                <div>
                    <h2><label class="resource-label">Force Techniques <a data-action="compendium"
                                                                          data-action-target="world.swse-force-techniques"
                                                                          title="{{localize "Open Compendium"}}"><i
                            class="fas fa-folder-plus"></i></a></label></h2>
                </div>
                <ol class="items-list">
                    {{#each actor.techniques as |item id|}}
                        <li class="item flexrow" data-item-id="{{item._id}}">
                            <h4 class="item-name"><b>{{item.name}}</b></h4>
                            <h4 class="item-name"><b>Prerequisites:</b> {{item.prerequisites}}</h4>
                            <div class="item-controls">
                                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                            </div>
                        </li>
                    {{/each}}
                </ol>
                <br/>
                <div>
                    <h2><label class="resource-label">Force Regimens <a data-action="compendium"
                                                                        data-action-target="world.swse-force-regimens"
                                                                        title="{{localize "Open Compendium"}}"><i
                            class="fas fa-folder-plus"></i></a></label></h2>
                </div>
                <ol class="items-list">
                    {{#each actor.regimens as |item id|}}
                        <li class="item flexrow" data-item-id="{{item._id}}">
                            <h4 class="item-name"><b>{{item.name}}</b></h4>
                            <h4 class="item-name"><b>Prerequisites:</b> {{item.prerequisites}}</h4>
                            <div class="item-controls">
                                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                            </div>
                        </li>
                    {{/each}}
                </ol>
            </div>

            <div class="tab affiliations" data-group="primary" data-tab="affiliations">
                {{> 'systems/swse/templates/actor/parts/actor-affiliations.hbs'}}
            </div>
        </section>
    </div>
</form>
